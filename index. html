<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Locked Site ‚Äî ‡§Ü‡§™‡§ï‡•Ä ‡§®‡§ø‡§ú‡•Ä ‡§∏‡§æ‡§á‡§ü</title>
<link rel="icon" href="data:;base64,iVBORw0KGgo=">
<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --accent:#7dd3fc; --glass: rgba(255,255,255,0.03);
    --muted:#94a3b8;
    font-family: "Inter", system-ui, Arial;
  }
  html,body{height:100%; margin:0; background: linear-gradient(180deg,#021226 0%, #08192b 100%); color:#e6eef6;}
  .center {
    min-height:100vh; display:flex; align-items:center; justify-content:center; padding:20px;
  }

  /* LOCK CARD */
  .lock-card{ width:100%; max-width:760px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:28px; box-shadow: 0 8px 30px rgba(2,6,23,0.7); backdrop-filter: blur(6px); border:1px solid rgba(255,255,255,0.03);}
  h1{margin:0 0 8px 0; font-size:22px; letter-spacing:0.2px;}
  p.lead{color:var(--muted); margin:0 0 16px 0;}
  .pass-row{display:flex; gap:12px; align-items:center;}
  input.pass{flex:1; padding:12px 14px; border-radius:10px; border:none; outline:none; background:var(--glass); color:inherit; font-size:16px;}
  button.btn{padding:10px 14px; border-radius:10px; border:none; cursor:pointer; background:var(--accent); color:#003244; font-weight:600;}
  .muted{color:var(--muted); font-size:13px;}
  .shake{ animation:shake .6s; }
  @keyframes shake{ 10%{transform:translateX(-8px)} 30%{transform:translateX(6px)} 50%{transform:translateX(-4px)} 70%{transform:translateX(2px)} 100%{transform:translateX(0)} }

  /* main content hidden initially */
  #mainApp{ display:none; padding:28px; max-width:1100px; margin:20px auto; }

  .topbar{ display:flex; justify-content:space-between; align-items:center; gap:16px; margin-bottom:18px;}
  .site-title{ font-weight:700; font-size:18px;}
  .menu{ display:flex; gap:10px; }
  .menu button{ background:transparent; border:1px solid rgba(255,255,255,0.04); padding:8px 10px; border-radius:8px; color:var(--muted); cursor:pointer;}
  .info{ cursor:pointer; margin-left:8px; color:var(--muted); font-size:14px; }

  /* message box */
  .message-box{ background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01)); border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03); display:flex; flex-direction:column; gap:8px;}
  .msg-row{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
  .msg-text{ font-size:15px; color:#dff8ff; }
  .meta{ color:var(--muted); font-size:13px; }
  .controls{ display:flex; gap:8px; }
  .small-btn{ padding:8px 10px; border-radius:9px; border:none; cursor:pointer; background:rgba(255,255,255,0.03); color:var(--muted); }

  /* hidden sections */
  .hidden-section{ display:none; margin-top:12px; gap:10px; }
  .card{ padding:12px; border-radius:10px; border:1px dashed rgba(255,255,255,0.03); background:rgba(255,255,255,0.01); }

  /* user input box */
  .user-input{ display:none; margin-top:12px; gap:8px; }
  textarea{ width:100%; min-height:90px; background:transparent; border-radius:8px; border:1px solid rgba(255,255,255,0.04); padding:10px; color:inherit; }

  footer{ color:var(--muted); font-size:13px; margin-top:16px; text-align:center;}

  /* responsive */
  @media (max-width:600px){ .pass-row{flex-direction:column;} .topbar{flex-direction:column; align-items:flex-start;} }
</style>
</head>
<body>

<div class="center">
  <div class="lock-card" id="lockCard" role="dialog" aria-label="Unlock site">
    <h1 id="lockTitle">‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‚Äî ‡§á‡§∏ ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§™‡§π‡•Å‡§Å‡§ö ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§π‡•à</h1>
    <p class="lead" id="lockLead">‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§π‡•Ä ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§°‡§æ‡§≤‡•á‡§Ç‡•§ ‡§Ü‡§™ ‡§ö‡§æ‡§π‡•á‡§Ç ‡§§‡•ã ‡§®‡•Ä‡§ö‡•á ‡§¶‡§ø‡§è ‡§ó‡§è ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§™‡§¢‡§º‡§ï‡§∞ ‡§≠‡•Ä ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§°‡§æ‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§</p>

    <div class="pass-row">
      <input id="passwordInput" class="pass" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≤‡§ø‡§ñ‡•á‡§Ç..." aria-label="Password input" />
      <button class="btn" id="unlockBtn">Unlock</button>
    </div>

    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
      <div class="muted">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ó‡§≤‡§§ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§∏‡§æ‡§á‡§ü ‡§¨‡•ã‡§≤‡§ï‡§∞ ‡§¨‡§§‡§æ ‡§¶‡•á‡§ó‡•Ä‡•§</div>
      <div style="display:flex; align-items:center;">
        <button class="small-btn" id="helpBtn">‡§ï‡§ø‡§∏ ‡§§‡§∞‡§π ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à?</button>
        <span class="info" title="i">i</span>
      </div>
    </div>

    <div style="margin-top:10px; font-size:13px; color:var(--muted);">
      <strong>‡§∏‡•Å‡§®‡•ç‡§¶‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ (‡§â‡§¶‡§æ‡§π‡§∞‡§£):</strong> admin123 , mera_paas , welcome2025
    </div>
  </div>
</div>

<!-- MAIN APP (hidden until correct password) -->
<main id="mainApp" role="main">
  <div class="topbar">
    <div>
      <div class="site-title">‡§™‡•ç‡§∞‡§æ‡§á‡§µ‡•á‡§ü ‡§∏‡§æ‡§á‡§ü ‚Äî ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à</div>
      <div class="muted">‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§™‡§ï‡•Ä ‡§®‡§ø‡§ú‡•Ä ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§î‡§∞ ‡§Æ‡•à‡§∏‡•á‡§ú‡•á‡§∏ ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á</div>
    </div>

    <div class="menu">
      <button id="toggleMessagesBtn">Message Box</button>
      <button id="toggleHiddenBtn">Pages</button>
      <button id="toggleUserInputBtn">User Input</button>
      <button id="voiceGuideBtn">Voice Guide</button>
    </div>
  </div>

  <!-- Message box -->
  <section id="messageSection" class="message-box card">
    <div class="msg-row">
      <div>
        <div class="msg-text" id="adminMessage">Loading message...</div>
        <div class="meta" id="msgTime">‚Äî</div>
      </div>
      <div class="controls">
        <button class="small-btn" id="readBtn">üëâ ‡§™‡§¢‡§º‡§ï‡§∞ ‡§∏‡•Å‡§®‡§æ‡§ì</button>
        <button class="small-btn" id="editLocalBtn" title="Download messages as JSON">üîΩ Download</button>
        <button class="small-btn" id="hideMsgBtn">Hide</button>
      </div>
    </div>
  </section>

  <!-- Hidden Pages -->
  <section id="hiddenPages" class="hidden-section">
    <div class="card">
      <strong>Photos</strong>
      <div class="muted">‡§Ø‡§π ‡§∏‡•á‡§ï‡•ç‡§∂‡§® hidden ‡§π‡•à ‚Äî admin ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ø‡§§ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ</div>
      <div id="photosArea" style="margin-top:8px;"></div>
    </div>

    <div class="card" style="margin-top:8px;">
      <strong>Videos</strong>
      <div class="muted">‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã / embed links ‡§Ø‡§π‡§æ‡§Å ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</div>
      <div id="videosArea" style="margin-top:8px;"></div>
    </div>

    <div class="card" style="margin-top:8px;">
      <strong>Notes (Hidden)</strong>
      <div id="notesArea" style="margin-top:8px;"></div>
    </div>
  </section>

  <!-- User input area -->
  <section id="userInputArea" class="user-input card">
    <strong>User Message (Hidden by default)</strong>
    <div class="muted">‡§Ø‡§π‡§æ‡§Å ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡§ï‡§∞ ‡§≠‡•á‡§ú ‡§∏‡§ï‡§§‡§æ ‡§π‡•à ‚Äî ‡§Ø‡§π localStorage ‡§Æ‡•á‡§Ç ‡§∞‡§ñ‡•á‡§ó‡§æ‡•§</div>
    <textarea id="userMsg" placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç..."></textarea>
    <div style="display:flex; gap:8px; margin-top:8px;">
      <button class="small-btn" id="sendUserMsg">Send</button>
      <button class="small-btn" id="downloadUserMsgs">Download Saved</button>
      <button class="small-btn" id="clearUserMsgs">Clear</button>
    </div>

    <div id="savedUserMsgs" style="margin-top:12px;"></div>
  </section>

  <footer>Site powered by simple Web TTS + GitHub Pages ‚Ä¢ Admin can edit <code>messages.json</code> in repo to update message</footer>
</main>

<script>
/* ============================
   Configuration
   ============================ */
const ADMIN_PASSWORD = "admin123"; // change this before publishing (or better: keep it and share only)
const MESSAGES_JSON = "messages.json"; // should be present in repo root

/* ============================
   Helpers: TTS speak
   ============================ */
function speak(text){
  if(!window.speechSynthesis) return;
  window.speechSynthesis.cancel();
  const ut = new SpeechSynthesisUtterance(text);
  // prefer Hindi voice if available
  const voices = window.speechSynthesis.getVoices();
  let chosen = voices.find(v => /hi|hindi/i.test(v.lang)) || voices.find(v => /en/i.test(v.lang)) || voices[0];
  if(chosen) ut.voice = chosen;
  ut.lang = chosen?.lang || 'hi-IN';
  ut.rate = 1;
  window.speechSynthesis.speak(ut);
}

/* ============================
   Lock screen logic
   ============================ */
const lockCard = document.getElementById('lockCard');
const passwordInput = document.getElementById('passwordInput');
const unlockBtn = document.getElementById('unlockBtn');
const helpBtn = document.getElementById('helpBtn');
const lockTitle = document.getElementById('lockTitle');
const lockLead = document.getElementById('lockLead');

function announceLockIntro(){
  speak("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§π‡•Ä ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§Ü‡§™ ‡§∏‡§æ‡§á‡§ü ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§ú‡§æ ‡§∏‡§ï‡•á‡§Ç‡•§ ‡§Ø‡§¶‡§ø ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ó‡§≤‡§§ ‡§π‡•ã‡§ó‡§æ ‡§§‡•ã ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•ã ‡§¨‡§§‡§æ ‡§¶‡•Ç‡§Å‡§ó‡§æ‡•§");
}
announceLockIntro();

helpBtn.addEventListener('click', ()=>{
  speak("‡§Ø‡§π ‡§≤‡•â‡§ï ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§π‡•à‡•§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§°‡§æ‡§≤‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ Enter ‡§¶‡§¨‡§æ‡§è‡§Å‡•§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§∏‡§π‡•Ä ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§Æ‡•à‡§Ç ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§ï‡§∞‡•Å‡§Å‡§ó‡§æ ‡§î‡§∞ ‡§∏‡§æ‡§á‡§ü ‡§ñ‡•Å‡§≤ ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§");
});

unlockBtn.addEventListener('click', tryUnlock);
passwordInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') tryUnlock(); });

function tryUnlock(){
  const val = passwordInput.value.trim();
  if(!val){ lockCard.classList.add('shake'); setTimeout(()=> lockCard.classList.remove('shake'),700); speak("‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç‡•§"); return; }
  if(val === ADMIN_PASSWORD){
    speak("‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à, ‡§Ü‡§™ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§Ö‡§Ç‡§¶‡§∞ ‡§Ü ‡§ö‡•Å‡§ï‡•á ‡§π‡•à‡§Ç!");
    openMainApp();
  } else {
    lockCard.classList.add('shake');
    setTimeout(()=> lockCard.classList.remove('shake'),700);
    speak("‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§");
    lockLead.textContent = "‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‚Äî ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∏‡•á ‡§°‡§æ‡§≤‡§ø‡§è‡•§";
  }
}

/* ============================
   Reveal main app
   ============================ */
const mainApp = document.getElementById('mainApp');
function openMainApp(){
  document.querySelector('.center').style.display = 'none';
  mainApp.style.display = 'block';
  // optionally announce main UI
  setTimeout(()=>{
    speak("‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡•É‡§∑‡•ç‡§† ‡§ñ‡•Å‡§≤ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§ä‡§™‡§∞ ‡§Æ‡•á‡§®‡•ç‡§Ø‡•Ç ‡§Æ‡•á‡§Ç Message Box, Pages ‡§î‡§∞ User Input ‡§Æ‡§ø‡§≤‡•á‡§Ç‡§ó‡•á‡•§ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§¨‡§ü‡§® ‡§ï‡•á ‡§™‡§æ‡§∏ i ‡§Ü‡§á‡§ï‡§® ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§Ü‡§™ ‡§î‡§∞ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡•Å‡§® ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
  }, 300);
}

/* ============================
   Load admin message from messages.json
   ============================ */
const adminMessageEl = document.getElementById('adminMessage');
const msgTimeEl = document.getElementById('msgTime');
const readBtn = document.getElementById('readBtn');
const editLocalBtn = document.getElementById('editLocalBtn');
const hideMsgBtn = document.getElementById('hideMsgBtn');

async function loadAdminMessage(){
  try{
    const res = await fetch(MESSAGES_JSON + "?noCache=" + Date.now());
    if(!res.ok) throw new Error("No message file");
    const data = await res.json();
    // expected structure: { "message": "...", "timestamp": "2025-12-05T19:42:00Z" }
    const msg = data.message || "‡§ï‡•ã‡§à ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç‡•§";
    adminMessageEl.textContent = msg;
    const ts = data.timestamp ? new Date(data.timestamp) : new Date();
    // Hindi formatted date and time
    const fmt = new Intl.DateTimeFormat('hi-IN', { dateStyle: 'long', timeStyle: 'short' });
    msgTimeEl.textContent = fmt.format(ts);
  } catch(err){
    adminMessageEl.textContent = "Admin message ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ Admin messages.json ‡§ï‡•ã repo ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§≤‡•á‡§Ç‡•§";
    msgTimeEl.textContent = "";
  }
}
loadAdminMessage();

readBtn.addEventListener('click', ()=>{
  const txt = adminMessageEl.textContent || "‡§ï‡•ã‡§à ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç‡•§";
  speak("‡§Æ‡•à‡§∏‡•á‡§ú ‡§™‡§¢‡§º ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‡•§ " + txt);
});

editLocalBtn.addEventListener('click', async ()=>{
  // download current messages.json content for admin editing offline
  try{
    const res = await fetch(MESSAGES_JSON + "?noCache=" + Date.now());
    let text = await res.text();
    const blob = new Blob([text], {type: "application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = "messages.json"; document.body.appendChild(a); a.click();
    a.remove(); URL.revokeObjectURL(url);
    speak("messages.json ‡§´‡§æ‡§á‡§≤ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞ ‡§¶‡•Ä ‡§ó‡§Ø‡•Ä ‡§π‡•à, ‡§Ü‡§™ ‡§á‡§∏‡•á GitHub ‡§™‡§∞ edit ‡§ï‡§∞ ‡§ï‡•á ‡§®‡§è ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§°‡§æ‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
  } catch(e){
    speak("messages.json ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ repo ‡§Æ‡•á‡§Ç ‡§Ø‡§π ‡§´‡§º‡§æ‡§á‡§≤ ‡§¨‡§®‡§æ‡§è‡§Å‡•§");
  }
});

hideMsgBtn.addEventListener('click', ()=>{
  const sec = document.getElementById('messageSection');
  if(sec.style.display === 'none'){ sec.style.display='block'; hideMsgBtn.textContent='Hide'; }
  else { sec.style.display='none'; hideMsgBtn.textContent='Show'; }
});

/* ============================
   Toggle sections & info voice
   ============================ */
document.getElementById('toggleMessagesBtn').addEventListener('click', ()=>{
  const s = document.getElementById('messageSection');
  s.style.display = (s.style.display === 'none' || s.style.display === '') ? 'block' : 'none';
  speak("Message Box ‡§ü‡•â‡§ó‡§≤ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§");
});

document.getElementById('toggleHiddenBtn').addEventListener('click', ()=>{
  const s = document.getElementById('hiddenPages');
  s.style.display = (s.style.display === 'none' || s.style.display === '') ? 'flex' : 'none';
  speak("Pages ‡§∏‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡•â‡§ó‡§≤ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§Ø‡§π‡§æ‡§Å Photos, Videos ‡§î‡§∞ Notes ‡§π‡•à‡§Ç‡•§");
});

document.getElementById('toggleUserInputBtn').addEventListener('click', ()=>{
  const s = document.getElementById('userInputArea');
  s.style.display = (s.style.display === 'none' || s.style.display === '') ? 'block' : 'none';
  speak("User Input ‡§¨‡•â‡§ï‡•ç‡§∏ ‡§ü‡•â‡§ó‡§≤ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
});

document.getElementById('voiceGuideBtn').addEventListener('click', ()=>{
  speak("‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§π‡•Ç‡§Å‡•§ ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§¨‡§ü‡§® ‡§ï‡•á ‡§™‡§æ‡§∏ 'i' ‡§¶‡§¨‡§æ‡§è‡§Ç ‡§Ø‡§æ ‡§™‡§¢‡§º‡§ï‡§∞ ‡§∏‡•Å‡§®‡§æ‡§ì ‡§¶‡§¨‡§æ‡§è‡§Ç‡•§");
});

/* info icons: explain elements on demand (simple example) */
document.querySelectorAll('.info').forEach(el=>{
  el.addEventListener('click', ()=> speak("‡§Ø‡§π ‡§è‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§Ü‡§á‡§ï‡§® ‡§π‡•à‡•§ ‡§á‡§∏‡•á ‡§¶‡§¨‡§æ‡§®‡•á ‡§™‡§∞ ‡§Æ‡•à‡§Ç ‡§â‡§∏ ‡§ö‡•Ä‡§ú‡§º ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§Æ‡•á‡§Ç ‡§¨‡§§‡§æ‡§ä‡§Å‡§ó‡§æ‡•§"));
});

/* ============================
   Hidden content placeholders (admin can update index or messages.json to populate)
   ============================ */
const photosArea = document.getElementById('photosArea');
const videosArea = document.getElementById('videosArea');
const notesArea = document.getElementById('notesArea');

function populateHiddenContent(){
  // default placeholders; admin can edit this part of index.html or implement fetch to repo JSON for dynamic content
  photosArea.innerHTML = '<div class="muted">‡§ï‡•ã‡§à ‡§´‡•ã‡§ü‡•ã ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡•Ä ‡§ó‡§Ø‡•Ä‡•§</div>';
  videosArea.innerHTML = '<div class="muted">‡§ï‡•ã‡§à ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§</div>';
  notesArea.innerHTML = '<div class="muted">No notes published.</div>';
}
populateHiddenContent();

/* ============================
   User messages handling (localStorage)
   ============================ */
const sendUserMsg = document.getElementById('sendUserMsg');
const downloadUserMsgs = document.getElementById('downloadUserMsgs');
const clearUserMsgs = document.getElementById('clearUserMsgs');
const savedUserMsgs = document.getElementById('savedUserMsgs');

function getUserMsgs(){ return JSON.parse(localStorage.getItem('userMsgs_v1')||'[]'); }
function renderUserMsgs(){
  const arr = getUserMsgs();
  if(arr.length===0) savedUserMsgs.innerHTML = '<div class="muted">No user messages saved.</div>';
  else {
    savedUserMsgs.innerHTML = arr.map((m,i)=>`<div style="padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);margin-bottom:8px;">
      <div style="font-size:14px">${escapeHtml(m.text)}</div>
      <div class="muted" style="font-size:12px;margin-top:6px;">${new Intl.DateTimeFormat('hi-IN',{dateStyle:'medium', timeStyle:'short'}).format(new Date(m.at))}</div>
      <div style="margin-top:6px;"><button class="small-btn" onclick="speak('${escapeForSpeech(m.text)}')">üîä ‡§∏‡•Å‡§®‡•ã</button></div>
    </div>`).join('');
  }
}
function escapeHtml(s){ return (s+'').replaceAll('<','&lt;').replaceAll('>','&gt;'); }
function escapeForSpeech(s){ return (s+'').replace(/'/g,""); }

sendUserMsg.addEventListener('click', ()=>{
  const txt = document.getElementById('userMsg').value.trim();
  if(!txt){ speak("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•á‡§Ç‡•§"); return; }
  const arr = getUserMsgs();
  arr.push({ text: txt, at: new Date().toISOString() });
  localStorage.setItem('userMsgs_v1', JSON.stringify(arr));
  document.getElementById('userMsg').value = '';
  renderUserMsgs();
  speak("‡§Ü‡§™‡§ï‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§");
});

downloadUserMsgs.addEventListener('click', ()=>{
  const arr = getUserMsgs();
  const blob = new Blob([JSON.stringify(arr, null, 2)], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'user-messages.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  speak("‡§Ü‡§™‡§ï‡•á ‡§∏‡§Ç‡§¶‡•á‡§∂‡•ã‡§Ç ‡§ï‡•ã ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§");
});

clearUserMsgs.addEventListener('click', ()=>{
  localStorage.removeItem('userMsgs_v1'); renderUserMsgs(); speak("‡§∏‡§≠‡•Ä user ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§π‡§ü‡§æ‡§Ø‡•á ‡§ó‡§Ø‡•á‡•§");
});

// initial render
renderUserMsgs();

/* ============================
   On first load: hide some sections by default
   ============================ */
document.getElementById('messageSection').style.display = 'block';
document.getElementById('hiddenPages').style.display = 'none';
document.getElementById('userInputArea').style.display = 'none';

/* ============================
   Load admin message periodically (optional)
   ============================ */
setInterval(loadAdminMessage, 60_000); // refresh every minute
</script>
</body>
</html>
